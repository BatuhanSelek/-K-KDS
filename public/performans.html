<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Performans</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/admin-lte/3.2.0/css/adminlte.min.css"
        integrity="sha512-IuO+tczf4J43RzbCMEFggCWW5JuX78IrCJRFFBoQEXNvGI6gkUw4OjuwMidiS4Lm9Q2lILzpJwZuMWuSEeT9UQ=="
        crossorigin="anonymous" referrerpolicy="no-referrer" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/admin-lte/3.2.0/js/adminlte.min.js"
        integrity="sha512-KBeR1NhClUySj9xBB0+KRqYLPkM6VvXiiWaSz/8LCQNdRpUm38SWUrj0ccNDNSkwCD9qPA4KobLliG26yPppJA=="
        crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.js"
        integrity="sha512-+k1pnlgt4F1H8L7t3z95o3/KO+o78INEcXTbnoJQ/F2VqDVhWoaiVml/OEHv9HsVgxUaVW+IbiZPUJQfF/YxZw=="
        crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/datatables/1.10.21/js/jquery.dataTables.min.js"
        integrity="sha512-BkpSL20WETFylMrcirBahHfSnY++H2O1W+UnEEO4yNIl+jI2+zowyoGJpbtk6bx97fBXf++WJHSSK2MV4ghPcg=="
        crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <link rel="stylesheet"
        href="https://cdnjs.cloudflare.com/ajax/libs/datatables/1.10.21/css/jquery.dataTables.min.css"
        integrity="sha512-1k7mWiTNoyx2XtmI96o+hdjP8nn0f3Z2N4oF/9ZZRgijyV4omsKOXEnqL1gKQNPy2MTSP9rIEWGcH/CInulptA=="
        crossorigin="anonymous" referrerpolicy="no-referrer" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css"
        integrity="sha512-DTOQO9RWCH3ppGqcWaEA1BIZOC6xxalwEsw9c2QQeAIftl+Vegovlnee1c9QX4TctnWMn13TZye+giMm8e2LwA=="
        crossorigin="anonymous" referrerpolicy="no-referrer" />

    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/4.4.1/chart.min.js"
        integrity="sha512-L0Shl7nXXzIlBSUUPpxrokqq4ojqgZFQczTYlGjzONGTDAcLremjwaWv5A+EDLnxhQzY5xUZPWLOLqYRkY0Cbw=="
        crossorigin="anonymous" referrerpolicy="no-referrer"></script>






    <script>
        $(document).ready(function () {
            $.ajax({
                url: "http://localhost:3000/api/puanGraf",  // Veri çekmek istediğiniz endpoint
                method: "GET",
                success: function (sonuc) {
                    var ctx = $('#polarAreaChart')[0].getContext('2d');
                    new Chart(ctx, {
                        type: 'bar',
                        data: sonuc,
                    });
                }
            });
        });
    </script>

    

</head>

<body class="hold-transition sidebar-mini">
    <div class="wrapper">
        <nav class="main-header navbar navbar-expand navbar-white navbar-light">
            <ul class="navbar-nav">
                <li class="navbar-item">
                    <a class="navbar-link" data-widget="pushmenu" href="#" role="button"><i class="fas fa-bars"></i></a>
                </li>
            </ul>
            <ul class="navbar-nav ml-auto">
                <li class="nav-item">
                    <a href="/login.html" class="nav-link" data-widget="control-sidebar" data-slide="true"
                        role="button">
                        <span id="geri">Çıkış</span>
                    </a>
                </li>
            </ul>
        </nav>
        <aside class="main-sidebar sidebar-dark-primary elevation-4">
            <a href="#" class="brand-link">
                <span class="brand-text font-weight-light">Performanslar</span>
            </a>

            <div class="sidebar">
                <div class="user-panel mt-3 pb-3 mb-3 d-flex">
                    <div class="info">
                        <a href="#" class="d-block">
                            <span id="sirket_adi">BilgiTek Yazılım</span>
                        </a>
                    </div>
                </div>
                <nav class="mt-2">
                    <ul class="nav nav-pills nav-sidebar flex-column" data-widget="treeview" role="menu"
                        data-accordion="false">
                        <li class="nav-item">
                            <a href="index.html" class="nav-link">
                                <i class="fa-solid fa-magnifying-glass-chart"></i>
                                <p>Analizler</p>
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="calisan.html" class="nav-link">
                                <i class="fa-solid fa-person"></i>
                                <p>Çalışan Yönetimi</p>
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="ise_alim.html" class="nav-link">
                                <i class="fa-solid fa-fax"></i>
                                <p>İşe Alım Yönetimi</p>
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="egitim_yonetimi.html" class="nav-link">
                                <i class="fa-solid fa-user-graduate"></i>
                                <p>Eğitim Yönetimi</p>
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="performans.html" class="nav-link">
                                <i class="fa-solid fa-chart-simple"></i>
                                <p>Performans</p>
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="grafik.html" class="nav-link">
                                <i class="fa-solid fa-chart-pie"></i>
                                <p>Grafikler</p>
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="filtrele.html" class="nav-link">
                                <i class="fa-solid fa-chart-pie"></i>
                                <p>Filtrele</p>
                            </a>
                        </li>
                    </ul>
                </nav>
            </div>
        </aside>
        <div class="content-wrapper">
            <div class="row">
                <div class="col-lg-6">
                    <div class="info-box" style="background-color: #343a40;">
                        <span class="info-box-icon bg-warning"><i
                                class="fa-solid fa-person-walking-arrow-loop-left"></i></span>
                        <div class="info-box-content">
                            <span class="info-box-text" style="color: white; font-size: 25px;">Toplam Değerlendirme
                                Sayısı
                            </span>
                            <span class="info-box-number" style="color: white; font-size: 25px;"
                                id="totalDegerlendirme">Yükleniyor...</span>
                        </div>
                    </div>
                </div>
                <div class="col-lg-6">
                    <div class="info-box" style="background-color: #343a40;">
                        <span class="info-box-icon bg-danger"><i class="fa-solid fa-comment-medical"></i></span>
                        <div class="info-box-content">
                            <span class="info-box-text" style="color: white; font-size: 25px;">Toplam Değerlendirme
                                Puanı
                            </span>
                            <span class="info-box-number" style="color: white; font-size: 25px;"
                                id="totalPuan">Yükleniyor...</span>
                        </div>
                    </div>
                </div>


                <!--<section class="content">-->
                <div class="card" style="width: 100%;">
                    <div class="card-header">
                        <h3 class="card-title">Değerlendirmeler</h3>
                    </div>
                    <div class="card-body" style="height: 600px;">
                        <canvas id="polarAreaChart" style="margin-left: 250px;"></canvas>
                        <!-- <div id="columnchart_values" style="width: 100%; margin-left: 250px;"></div> -->



                    </div>
                </div>
                <!--</section>-->



            </div>
            <section class="content">
                <div class="card">

                    <div class="card-body">
                        <form id="predictionForm">
                            <input type="number" id="performanceScore" placeholder="Performans Puanı">
                            <button type="button" onclick="performPrediction()">Tahmin Et</button>
                        </form>





                    </div>
                </div>
            </section>
            <section class="content">
                <div class="card">

                    <div class="card-body">
                        <div id="predictionResult"></div>





                    </div>
                </div>
            </section>



            <section class="content">
                <div class="card">

                    <div class="card-body">

                        <input type="number" id="experienceYears" placeholder="Deneyim Yılı">
                        <button onclick="showPredictedSalary()">Tahmin Et</button>

                    </div>
                </div>
            </section>
            <section class="content">
                <div class="card">

                    <div class="card-body">
                        <p id="predictedSalary"></p>





                    </div>
                </div>
            </section>


        </div>
        <footer class="main-footer">
            <div class="float-right d-none d-sm-block">
                <b>Versiyon 1.0</b>
            </div>
            <strong>Copyright 2023<a href="" #>Müşteri Admin Panel</a></strong>
        </footer>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function () {
            fetch('/api/totalDegerlendirme')
                .then(response => {
                    if (!response.ok) {
                        throw new Error('Network response was not ok ' + response.statusText);
                    }
                    return response.json();
                })
                .then(data => {
                    document.getElementById('totalDegerlendirme').textContent = data[0].totalDegerlendirme + ' Kişi';
                })
                .catch(error => {
                    console.error('There has been a problem with your fetch operation:', error);
                    document.getElementById('totalDegerlendirme').textContent = 'Bilgi alınamadı';
                });
        });

    </script>
    <script>
        document.addEventListener('DOMContentLoaded', function () {
            fetch('/api/totalPuan')
                .then(response => {
                    if (!response.ok) {
                        throw new Error('Network response was not ok ' + response.statusText);
                    }
                    return response.json();
                })
                .then(data => {
                    document.getElementById('totalPuan').textContent = data[0].totalPuan + ' Puan';
                })
                .catch(error => {
                    console.error('There has been a problem with your fetch operation:', error);
                    document.getElementById('totalPuan').textContent = 'Bilgi alınamadı';
                });
        });

    </script>
    <script>
        function performPrediction() {
            // Kullanıcı girdisini al
            const employeeData = {
                // Örneğin, kullanıcıdan alınan performans puanı
                performanceScore: document.getElementById('performanceScore').value,
                // Diğer gerekli veriler burada toplanır
            };

            // Basit bir tahminleme işlemi yap
            const predictedPerformance = simpleRegressionModel(employeeData.performanceScore);

            // Tahmini göster
            document.getElementById('predictionResult').textContent = `Tahmini Performans: ${predictedPerformance}`;
        }

        // Basit regresyon modeli (Örnek olarak, bu çok basit bir tahmin)
        function simpleRegressionModel(performanceScore) {
            // Bu, modelinizi eğitmek için daha karmaşık bir işlem gerektirecektir.
            // Burada statik bir katsayı ile basit bir çarpım yapıyoruz.
            return performanceScore * 1.1;
        }

    </script>

    <script>
        function showPredictedSalary() {
            // Kullanıcı girdisini al
            const experienceYears = document.getElementById('experienceYears').value;
            // Tahmini yap
            const salary = predictSalary(experienceYears);
            // Tahmini göster
            document.getElementById('predictedSalary').textContent = `Tahmini Tazminat: ${salary} TL`;
        }

        function predictSalary(experienceYears) {
            const baseSalary = 10000; // Temel maaş
            const salaryIncreasePerYear = 8000; // Yıllık maaş artışı

            // Deneyim yılına göre maaşı hesapla
            return baseSalary + (salaryIncreasePerYear * experienceYears);
        }
    </script>
</body>

</html>